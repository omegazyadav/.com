<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=content-type content="text/html"><meta name=viewport content="width=device-width,initial-scale=1"><title itemprop=name>Github Action Reusable Workflows | Yadav Lamichhane</title>
<meta property="og:title" content="Github Action Reusable Workflows | Yadav Lamichhane"><meta name=twitter:title content="Github Action Reusable Workflows | Yadav Lamichhane"><meta itemprop=name content="Github Action Reusable Workflows | Yadav Lamichhane"><meta name=application-name content="Github Action Reusable Workflows | Yadav Lamichhane"><meta property="og:site_name" content><meta name=description content="Manage Reusable workflow with Github Actions"><meta itemprop=description content="Manage Reusable workflow with Github Actions"><meta property="og:description" content="Manage Reusable workflow with Github Actions"><meta name=twitter:description content="Manage Reusable workflow with Github Actions"><meta property="og:locale" content="en-us"><meta name=language content="en-us"><link rel=alternate hreflang=en href=https://omegazyadav.com/posts/github-action-reusable-workflow/ title><meta property="og:type" content="article"><meta property="og:article:published_time" content=2023-05-25T00:00:00Z><meta property="article:published_time" content=2023-05-25T00:00:00Z><meta property="og:url" content="https://omegazyadav.com/posts/github-action-reusable-workflow/"><meta property="og:article:author" content="Yadav Lamichhane"><meta property="article:author" content="Yadav Lamichhane"><meta name=author content="Yadav Lamichhane"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Github Action Reusable Workflows","author":{"@type":"Person","name":""},"datePublished":"2023-05-25","description":"Manage Reusable workflow with Github Actions","wordCount":755,"mainEntityOfPage":"True","dateModified":"2023-05-25","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"Yadav Lamichhane"}}</script><meta name=generator content="Hugo 0.128.2"><meta property="og:url" content="https://omegazyadav.com/posts/github-action-reusable-workflow/"><meta property="og:site_name" content="Yadav Lamichhane"><meta property="og:title" content="Github Action Reusable Workflows"><meta property="og:description" content="Manage Reusable workflow with Github Actions"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-25T00:00:00+00:00"><meta property="article:modified_time" content="2023-05-25T00:00:00+00:00"><meta property="article:tag" content="Linux"><meta name=twitter:card content="summary"><meta name=twitter:title content="Github Action Reusable Workflows"><meta name=twitter:description content="Manage Reusable workflow with Github Actions"><link rel=canonical href=https://omegazyadav.com/posts/github-action-reusable-workflow/><link href=/style.min.2d921c18cf1ec555ffc03d59a8adc211c402c68c930c27d6a0c306ab175a8d09.css rel=stylesheet><link href=/code-highlight.min.706d31975fec544a864cb7f0d847a73ea55ca1df91bf495fd12a177138d807cf.css rel=stylesheet><link rel=apple-touch-icon sizes=180x180 href=/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/icons/favicon-16x16.png><link rel=mask-icon href=/icons/safari-pinned-tab.svg><link rel="shortcut icon" href=/favicon.ico><link rel=manifest href=https://omegazyadav.com/site.webmanifest><meta name=msapplication-config content="/browserconfig.xml"><meta name=msapplication-TileColor content="#2d89ef"><meta name=theme-color content="#434648"><meta name=color-scheme content="light dark"><link rel=icon type=image/svg+xml href=/icons/favicon.svg></head><body data-theme class=notransition><script src=/js/theme.min.8961c317c5b88b953fe27525839672c9343f1058ab044696ca225656c8ba2ab0.js integrity="sha256-iWHDF8W4i5U/4nUlg5ZyyTQ/EFirBEaWyiJWVsi6KrA="></script><div class=navbar role=navigation><nav class=menu aria-label="Main Navigation"><a href=/ class=logo><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><title/><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
</a><input type=checkbox id=menu-trigger class=menu-trigger>
<label for=menu-trigger><span class=menu-icon><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" stroke="currentcolor" fill="none" viewBox="0 0 14 14"><title>Menu</title><path stroke-linecap="round" stroke-linejoin="round" d="M10.595 7H3.40726"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 3.51488H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M10.5096 10.4851H3.49301"/><path stroke-linecap="round" stroke-linejoin="round" d="M.5 12.5V1.5c0-.552285.447715-1 1-1h11C13.0523.5 13.5.947715 13.5 1.5v11C13.5 13.0523 13.0523 13.5 12.5 13.5H1.5C.947715 13.5.5 13.0523.5 12.5z"/></svg></span></label><div class=trigger><ul class=trigger-container><li><a class=menu-link href=/>Home</a></li><li><a class="menu-link active" href=/posts/>Posts</a></li><li><a class=menu-link href=/bio/>Bio</a></li><li class=menu-separator><span>|</span></li><li class=menu-link><ul><a class=rss href=https://github.com/omegazyadav style=text-decoration:none target=_blank><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" fill="currentcolor"><title>Yadav Lamichhane on GitHub</title><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59C5.87 15.66 6.02 15.42 6.02 15.21 6.02 15.02 6.01 14.39 6.01 13.72 4 14.09 3.48 13.23 3.32 12.78 3.23 12.55 2.84 11.84 2.5 11.65 2.22 11.5 1.82 11.13 2.49 11.12 3.12 11.11 3.57 11.7 3.72 11.94 4.44 13.15 5.59 12.81 6.05 12.6 6.12 12.08 6.33 11.73 6.56 11.53 4.78 11.33 2.92 10.64 2.92 7.58c0-.87.31-1.59.82-2.15C3.66 5.23 3.38 4.41 3.82 3.31c0 0 .67-.21 2.2.82C6.66 3.95 7.34 3.86 8.02 3.86S9.38 3.95 10.02 4.13c1.53-1.04 2.2-.82 2.2-.82C12.66 4.41 12.38 5.23 12.3 5.43 12.81 5.99 13.12 6.7 13.12 7.58c0 3.07-1.87 3.75-3.65 3.95C9.76 11.78 10.01 12.26 10.01 13.01 10.01 14.08 10 14.94 10 15.21 10 15.42 10.15 15.67 10.55 15.59 13.71 14.53 16 11.53 16 8c0-4.42-3.58-8-8-8z" transform="scale(64)"/></svg></a></ul></li><li class=menu-separator><span>|</span></li></ul><a id=mode href=#><svg xmlns="http://www.w3.org/2000/svg" class="mode-sunny" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>LIGHT</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg><svg xmlns="http://www.w3.org/2000/svg" class="mode-moon" width="21" height="21" viewBox="0 0 14 14" stroke-width="1"><title>DARK</title><g><circle cx="7" cy="7" r="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1=".5" x2="7" y2="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="2.4" x2="3.82" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1=".5" y1="7" x2="2.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="2.4" y1="11.6" x2="3.82" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="7" y1="13.5" x2="7" y2="11.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="11.6" x2="10.18" y2="10.18" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="13.5" y1="7" x2="11.5" y2="7" fill="none" stroke-linecap="round" stroke-linejoin="round"/><line x1="11.6" y1="2.4" x2="10.18" y2="3.82" fill="none" stroke-linecap="round" stroke-linejoin="round"/></g></svg></a></div></nav></div><div class="wrapper post"><main class=page-content aria-label=Content><article><header class=header><h1 class=header-title>Github Action Reusable Workflows</h1><div class=post-meta><time datetime=2023-05-25T00:00:00+00:00 itemprop=datePublished>May 25, 2023</time></div></header><div class=page-content><h1 id=github-reusable-workflows>GitHub Reusable workflows</h1><p>In this blog post, we will be exploring the Github Reusable workflows and how we can leverage them. The primary purpose of reusing workflows is to avoid code duplication when we have similar repositories with similar workflows. This makes workflows easier to maintain and allows you to create new workflows more quickly by building on the work of others, just as you do with actions. Workflow reuse also promotes best practices by helping you to use workflows that are well-designed, have already been tested, and have been proven to be effective.</p><p><img src=https://cdn-images-1.medium.com/max/2462/1*8gQuw2Y5WnSkCN8HnJf7Ww.png alt></p><p>The above diagram shows service deployment workflow is kept inside ga-flows-central repository while child services like service1 service2 service..n is calling central workflows.</p><p>Since we are trying to have cross-repository access with both being private repositories, we need to enable access with the following steps:</p><p><strong>Managing access of central reusable workflows to private repositories</strong></p><ul><li><p>On GitHub, navigate to the main page of the repository where your reusable workflow resides</p></li><li><p>Under your repository name, click <strong>Settings</strong>.</p></li><li><p>In the left sidebar, click <strong>Actions</strong>, then click <strong>General</strong>.</p></li><li><p>Under <strong>Access</strong>, choose the access settings:</p></li><li><p><strong>Accessible from repositories in the “cloudhonk” organization</strong></p></li><li><p>Click <strong>Save</strong> to apply the settings.</p></li></ul><p><img src=https://cdn-images-1.medium.com/max/2000/1*6-7Jm41ZV-LhYAYMObfNHQ.png alt></p><p>For experimentation purposes, we have created a reusable workflow in ga-flow-central repository whereas calling workflow is defined in ga-flows-child repository.</p><p><img src=https://cdn-images-1.medium.com/max/2000/1*OVZObQqbUtGBGDVmUBMiRA.png alt></p><p>In this post, we will be covering the following topics:</p><ul><li><p>Reference of Reusable workflow from another repository</p></li><li><p>Passing Repository Secrets Variables</p></li><li><p>Passing Environment Variables</p></li></ul><p><strong>Reference of Reusable workflow from another repository</strong></p><p>Here we will use a simple workflow that will print the git version used in the workflow. The content of the reusable workflow in ga-flows-central repository is as follows:</p><pre><code>name: Reusable Github Actions - Demo

run-name: Github Reusable Workflow

on:
  workflow_call:

jobs:
  called-workflow:
    runs-on: ubuntu-latest
    steps:
      - name: Check out Repository
        uses: actions/checkout@v3

      - name: Print the git version
        run: |
          git --version
</code></pre><blockquote><p><strong>Note: For a workflow to be reusable, the values for on must include workflow_call:</strong></p></blockquote><p>Now we can call the reusable workflow defined in ga-flow-central repository in ga-flows-child with uses keyword:</p><pre><code>name: Reusable GA Workflow Demo

on:
  push:

jobs:
  calling-workflow:
    uses: cloudhonk/ga-flow-central/.github/workflows/reusable.yml@feat/git-version
</code></pre><p>reusable.yml file on ga-flow-central the repository was configured inside feat/git-version branch so we need to append @feat/git-version on called workflow.</p><pre><code>uses: cloudhonk/ga-flow-central/.github/workflows/reusable.yml@feat/git-version
</code></pre><p><img src=https://cdn-images-1.medium.com/max/2000/1*vUoG8jZ0bwetm0Ght5oRyQ.png alt="Fig: ga-flow-child repo calling ga-flow-central workflows to print git version"><em>Fig: ga-flow-child repo calling ga-flow-central workflows to print git version</em></p><p><strong>Passing Repository Secrets Variables</strong></p><p>We can use the inherit keyword to pass all the calling workflow’s secrets to the called workflow. This includes all secrets the calling workflow has access to, namely organization, repository, and environment secrets. The inherit keyword can be used to pass secrets across repositories within the same organization, or across organizations within the same enterprise.</p><p>In this case, we will be creating a personal access token and keeping the token as a secrets variable in ga-flow-childrepository instead of ga-flow-central . This will enable us to override a secrets variable dynamically as per our use cases in different repositories.</p><p>Below mentioned workflow should clone the private repository with the use of a PAT token and list all the files and directories present in it.</p><p>Called workflow:</p><pre><code>   - name: Clone the Github Repository
     run: |
       git clone https://${{ secrets.ORG_GITHUB_TOKEN }}@github.com/cloudhonk/ga-flow-central
       ls ga-flow-central
</code></pre><p>Calling workflow:</p><pre><code>jobs:
  calling-workflow:
    uses: cloudhonk/ga-flow-central/.github/workflows/reusable.yml@feat/reusable-workflows
    secrets: inherit
</code></pre><p><img src=https://cdn-images-1.medium.com/max/2000/1*GurZd5fw__vho5fEANYEMg.png alt></p><p><strong>Passing Environment Variables</strong></p><p>We can override the environment variables defined in the called workflow with user-specified values in the calling workflow. This is useful when you want to override the environment variables based on the repository.</p><p>Here, DAY_OF_WEEK defined in gal-flow-central repo has default value as “Tuesday”. What if we wanted to override that value with something else, lets say with “Saturday”. For this case we have to keep DAY_OF_WEEKrepository variables in ga-flow-child repo and reference it with with keyword.</p><pre><code>with:
      DAY_OF_WEEK: ${{ vars.DAY_OF_WEEK }}
</code></pre><p><strong>Workflow in ga-flow-central repository</strong></p><pre><code>name: Reusable Github Actions - Demo

run-name: Github Reusable Workflow - ${{ github.actor }}

on:
  workflow_call:
    inputs:
      DAY_OF_WEEK:
        required: true
        type: string
        default: &quot;Tuesday&quot;

jobs:
  called-workflow:
    runs-on: ubuntu-latest
    steps:
      - name: Check out Repository
        uses: actions/checkout@v3

      - name: Print the environment variables
        run: |
          echo ${{ inputs.DAY_OF_WEEK }}
</code></pre><p><strong>Workflow in calling repository</strong></p><pre><code>name: Reusable Github Actions Workflow Demo

on:
  push:

jobs:
  calling-workflow:
    uses: cloudhonk/ga-flow-central/.github/workflows/reusable.yml@feat/reusable-workflow
    with:
      DAY_OF_WEEK: ${{ vars.DAY_OF_WEEK }} # Create a Repository Variable for DAY_OF_WEEK
    secrets: inherit
</code></pre><p><img src=https://cdn-images-1.medium.com/max/2000/1*10uC_P0buy68yvoKafwmpA.png alt></p><p>Here, the value for DAY_OF_WEEK has been overridden from “Tuesday” to “Saturday”.</p><p>This is all about GitHub Actions Reusable Workflow, we have been using it for almost all the repositories for quite some time now. If you have any questions related to this, please feel free to drop comments on the post.</p></div></article></main></div><footer class=footer><span class=footer_item></span>&nbsp;<div class=footer_social-icons><a href=https://github.com/omegazyadav target=_blank rel="noopener noreferrer me" title=Github><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://twitter.com/omegazyadav target=_blank rel="noopener noreferrer me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg>
</a><a href=https://linkedin.com/omegazyadav target=_blank rel="noopener noreferrer me" title=Linkedin><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
</a><a href=https://mastodon.social/@omegazyadav target=_blank rel="noopener noreferrer me" title=Mastodon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.58 13.913c-.29 1.469-2.592 3.121-5.238 3.396-1.379.184-2.737.368-4.185.276-2.368-.092-4.237-.551-4.237-.551.0.184.014.459.043.643.308 2.294 2.317 2.478 4.22 2.57 1.922.0 3.633-.46 3.633-.46l.079 1.653s-1.344.734-3.738.918c-1.32.091-2.96-.092-4.869-.551-4.14-1.102-4.853-5.507-4.961-10.005-.034-1.285-.013-2.57-.013-3.58.0-4.589 3-5.966 3-5.966 1.513-.734 4.11-1.01 6.808-1.01h.067c2.699.0 5.296.276 6.81 1.01.0.0 3 1.377 3 5.967.0.0.037 3.304-.419 5.69" stroke="currentcolor"/><path d="M17.832 8.633v5h-1.978V8.78c0-1.023-.43-1.542-1.29-1.542-.95.0-1.427.616-1.427 1.834v2.655H11.17V9.072c0-1.218-.476-1.834-1.427-1.834-.86.0-1.29.52-1.29 1.542v4.852H6.475V8.633c0-1.022.26-1.834.782-2.434.538-.6 1.243-.909 2.118-.909 1.012.0 1.779.39 2.286 1.169l.492.827.493-.827c.507-.78 1.274-1.169 2.286-1.169.875.0 1.58.308 2.118.909.522.6.782 1.412.782 2.434" fill="currentcolor" stroke="none"/></svg>
</a><a href=https://medium.com/omegazyadav target=_blank rel="noopener noreferrer me" title=Medium><svg version="1.0" xmlns="http://www.w3.org/2000/svg" fill="currentcolor" stroke-width="2" viewBox="0 0 76 76"><g transform="translate(0.000000,76.000000) scale(0.100000,-0.100000)"><path d="M0 380V0h380 380v380 380H380 0V380zm334 85c30-63 57-115 59-115s16 30 31 68c15 37 37 88 49 115l20 47h76l76-1-27-20-28-21V387c0-150 0-151 27-179l27-28H535 426l27 28c26 27 27 32 26 143 0 131 3 134-71-58-24-62-48-113-53-113-6 0-17 16-24 35s-36 83-64 142l-52 108-3-98c-3-97-2-99 28-133 16-19 30-39 30-44 0-6-31-10-70-10-45 0-70 4-70 11 0 6 14 27 30 46 30 33 30 35 30 151s0 118-31 155l-30 37h75 76l54-115z"/></g></svg>
</a><a href=index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></div><small class=footer_copyright>© 2025 Yadav Lamichhane
<a href=https://gohugo.io target=_blank rel="noreferrer noopener"></a></small></footer><a href=# title="Go to top" id=totop><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentcolor" stroke="currentcolor" viewBox="0 96 960 960"><path d="M283 704.739 234.261 656 480 410.261 725.739 656 677 704.739l-197-197-197 197z"/></svg>
</a><script src=https://omegazyadav.com/js/main.min.35f435a5d8eac613c52daa28d8af544a4512337d3e95236e4a4978417b8dcb2f.js integrity="sha256-NfQ1pdjqxhPFLaoo2K9USkUSM30+lSNuSkl4QXuNyy8="></script></body></html>